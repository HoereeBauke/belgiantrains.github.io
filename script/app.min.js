"use strict";function setDate(){return d=new Date}function formatDate(e){var t=e.getMonth(),a=e.getDate().toString(),n=e.getFullYear();return n=n.toString().substr(-2),1===(t=(t+1).toString()).length&&(t="0"+t),1===a.length&&(a="0"+a),a+t+n}function formatTime(e){var t=d.getHours().toString(),a=d.getMinutes().toString();return 1===t.length&&(t="0"+t),1===a.length&&(a="0"+a),t+a}function checkToggle(e){0==$("#arrdep").prop("checked")?1==$("#delay").prop("checked")?getTrains(tglType="departure",tglDelay=1,e):0==$("#delay").prop("checked")&&getTrains(tglType="departure",tglDelay=0,e):1==$("#arrdep").prop("checked")&&(1==$("#delay").prop("checked")?getTrains(tglType="arrival",tglDelay=1,e):0==$("#delay").prop("checked")&&getTrains(tglType="arrival",tglDelay=0,e))}function getTrains(e,t,a){var n=formatDate(setDate()),i=formatTime(setDate());$.getJSON("https://api.irail.be/liveboard/?station="+a+"&date="+n+"&time="+i+"&arrdep="+e+"&lang=en&format=json&fast=false&alerts=false",function(a){document.getElementById("content").innerHTML="";for(var n=0;n<3;n++)if("departure"==e){createBox((i=a.departures).departure[n],t,e)}else if("arrival"==e){var i=a.arrivals;createBox(i.arrival[n],t,e)}})}function createBox(e,t,a){var n=document.createElement("section");n.classList.add("train");var i=document.createElement("div");i.classList.add("top");var r=document.createElement("div");r.classList.add("bottom");var d=document.createElement("span");if(d.classList.add("TrainTime"),"arrival"==a)l=new Date(1e3*(e.time-300));else if("departure"==a)var l=new Date(1e3*e.time);var s=l.getHours().toString(),o=l.getMinutes().toString();1===s.length&&(s="0"+s),1===o.length&&(o="0"+o),l=s+":"+o,d.textContent=l;var c=document.createElement("span");c.classList.add("TrainType");var g=e.vehicle.substring(8),p="";g.startsWith("IC")?p=g.substring(0,2):g.startsWith("IR")?p=g.substring(0,2):g.startsWith("S")?p=g[0]:g.startsWith("L")?p=g[0]:g.startsWith("P")&&(p=g[0]),c.textContent=p;var u=document.createElement("span");u.classList.add("TrainPlatform"),"?"==e.platform?u.textContent="__":u.textContent=e.platform;var m=document.createElement("span");m.classList.add("TrainDest"),m.textContent=e.station;var h=document.createElement("span");if(i.appendChild(d),i.appendChild(u),i.appendChild(c),r.appendChild(h),r.appendChild(m),n.appendChild(i),n.appendChild(r),1==t)if("0"!=e.delay&&(e.canceled="0")){h.classList.add("TrainDelay"),r.appendChild(m),r.appendChild(h);var f=new Date(1e3*e.delay),v=f.getHours().toString();if("arrival"==a){y=(y=f.getMinutes()+5).toString()}else if("departure"==a)var y=f.getMinutes().toString();1===v.length&&(v="0"+v-1),1===y.length&&(y="0"+y),f=v+":"+y,h.textContent="+ "+f}else"0"==e.delay&&"0"!=e.canceled?(h.classList.add("TrainDelay"),r.appendChild(m),r.appendChild(h),u.textContent="__",h.textContent="AFGELAST"):(e.delay="0")&&(e.canceled="0")&&r.appendChild(m);else 1==t&&r.appendChild(m);document.getElementById("content").appendChild(n)}var selectedStad,d,tglType,tglDelay,stationsnamen=[];$.getJSON("https://api.irail.be/stations/?format=json&lang=en",function(e){for(var t=e.station,a=0;a<t.length;a++){var n=t[a].name;-1!=n.indexOf("/")?(n=n.substr(0,n.indexOf("/")),stationsnamen.push(n)):stationsnamen.push(n)}}),$(function(){$("#cities").autocomplete({minLength:3,source:stationsnamen})}),$(document).ready(function(){document.getElementById("cities").value="Oudenaarde",selectedStad=document.getElementById("cities").value,$("#cities").focus(),checkToggle(selectedStad),$("#cities").on("autocompletechange",function(){checkToggle(selectedStad=this.value.toLowerCase())}).change(),$("#arrdep").change(function(){checkToggle(selectedStad=document.getElementById("cities").value)}),$("#delay").change(function(){checkToggle(selectedStad=document.getElementById("cities").value)}),setInterval(function(){0===parseInt((new Date).getTime()/1e3%60)&&checkToggle(selectedStad)},1e3)}),document.addEventListener("DOMContentLoaded",function(){document.getElementById("cities").style.width="auto",console.info("The document is loaded and the file is linked to the index.html file.")});